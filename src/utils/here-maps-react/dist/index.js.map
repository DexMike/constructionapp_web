{"version":3,"file":"index.js","sources":["../node_modules/tslib/tslib.es6.js","../src/utils/cache.ts","../src/utils/debounce.ts","../src/utils/get-link.ts","../src/utils/get-script-map.ts","../src/utils/map-context.ts","../src/utils/get-platform.ts","../src/HEREMap.tsx","../src/Circle.tsx","../src/utils/get-dom-marker-icon.ts","../src/utils/get-marker-icon.ts","../src/utils/set-drag-event.ts","../src/Marker.tsx","../src/RouteLine.tsx"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","// declare an interface for the object that is\r\n// used to describe each script and stored in the\r\n// map\r\nexport interface ScriptState {\r\n  _callbacks?: Array<() => void>\r\n  hasLoaded: boolean\r\n  wasRejected: boolean\r\n  error?: any\r\n  promise: Promise<ScriptState>\r\n  tag: HTMLScriptElement\r\n}\r\n\r\n/**\r\n * map for script names against utility objects\r\n */\r\nexport const loadedScripts = new Map<string, ScriptState>()\r\n\r\n/**\r\n * script tags to be generated by the cache method\r\n */\r\nexport let scriptTags: ScriptTags = {}\r\n\r\n// declare an interface for the scripts object\r\n// that is passed into the cache function\r\nexport interface Scripts {\r\n  [name: string]: string\r\n}\r\n\r\n// declare a standard callback type\r\nexport type Callback = (error: any, result?: any) => void\r\nexport type AllCallback = (errors?: any[], results?: any[]) => void\r\n\r\n// declare an interface for a single script tag object\r\nexport interface ScriptTag {\r\n  name: string\r\n  script: string\r\n  tag: ScriptState\r\n  onLoad(callback: Callback): void\r\n}\r\n\r\n// declare an interface for the script tags object\r\n// that stores info on each requested script\r\nexport interface ScriptTags {\r\n  [name: string]: ScriptTag\r\n}\r\n\r\n/**\r\n *\r\n * @param scripts {Scripts} - An object with all the scripts required.\r\n * Keys are script names, values are URLs.\r\n */\r\nexport function cache(scripts: Scripts): void {\r\n  Object.entries(scripts).forEach(([script, name]) => {\r\n    const tag = getScript(script, name)\r\n    if (tag) {\r\n      scriptTags = {\r\n        ...scriptTags,\r\n        [name]: {\r\n          name,\r\n          onLoad: onLoad.bind(null, name),\r\n          script,\r\n          tag,\r\n        },\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\nexport function getScriptStub(name: string): ScriptTag {\r\n  return scriptTags[name]\r\n}\r\n\r\n/**\r\n * Callback to be fired when each script has loaded.\r\n * @param name {string} - The name of the string that has just loaded.\r\n * @param callback {Callback} - A callback to execute when the script has loaded.\r\n */\r\nexport function onLoad(name: string, callback: Callback): void {\r\n  const stored = loadedScripts.get(name)\r\n\r\n  if (stored && stored.hasLoaded) {\r\n    callback(null, stored)\r\n  } else if (stored) {\r\n    stored.promise.then(() => {\r\n      stored.wasRejected ? callback(stored.error) : callback(null, stored)\r\n    })\r\n  }\r\n}\r\n\r\n/**\r\n * Callback to be fired when all scripts have loaded\r\n * @param callback {Function} - The callback to be executed.\r\n */\r\nexport function onAllLoad(callback: AllCallback) {\r\n  const promises: Array<Promise<ScriptState>> = []\r\n  const results: ScriptState[] = []\r\n\r\n  loadedScripts.forEach((value: ScriptState) => {\r\n    if (value.hasLoaded) {\r\n      results.push(value)\r\n    } else {\r\n      promises.push(value.promise)\r\n    }\r\n  })\r\n\r\n  if (promises.length > 0) {\r\n    Promise.all(promises)\r\n      .then((res: any[]) => callback(undefined, res))\r\n      .catch((errs: any[]) => callback(errs, undefined))\r\n  } else {\r\n    callback(undefined, results)\r\n  }\r\n}\r\n\r\n/**\r\n * Get a script from a remote location.\r\n * @param name {string} - The name of the script to be retrieved.\r\n * @param url {string} - The URL/location of the script to be retrieved.\r\n */\r\nexport function getScript(url: string, name: string): ScriptState | undefined {\r\n  if (\r\n    !loadedScripts.has(name) &&\r\n    !document.querySelector(`script[src=\"${url}\"]`)\r\n  ) {\r\n    let tag: HTMLScriptElement = document.createElement('script')\r\n\r\n    const promise = new Promise<ScriptState>((resolve, reject) => {\r\n      const body = document.getElementsByTagName('body')[0]\r\n\r\n      // make sure the script type is javascript\r\n      // and that scripts are loaded in order using\r\n      // the \"async\" option\r\n      tag = {\r\n        ...tag,\r\n        async: false,\r\n        type: 'text/javascript',\r\n      }\r\n\r\n      function handleResult(event: Event) {\r\n        const stored = loadedScripts.get(name)\r\n\r\n        if (stored) {\r\n          if (event.type === 'load') {\r\n            stored.hasLoaded = true\r\n            resolve(stored)\r\n          } else if (event.type === 'error') {\r\n            stored.wasRejected = true\r\n            reject(stored.error)\r\n          }\r\n        } else {\r\n          reject('Script does not exist')\r\n        }\r\n      }\r\n\r\n      // add load and error event listeners\r\n      tag.addEventListener('load', handleResult)\r\n      tag.addEventListener('error', handleResult)\r\n\r\n      tag = {\r\n        ...tag,\r\n        src: url,\r\n      }\r\n\r\n      body.appendChild(tag)\r\n    })\r\n\r\n    const scriptObject: ScriptState = {\r\n      hasLoaded: false,\r\n      promise,\r\n      tag,\r\n      wasRejected: false,\r\n    }\r\n\r\n    loadedScripts.set(name, scriptObject)\r\n  }\r\n\r\n  return loadedScripts.get(name)\r\n}\r\n\r\n// also make cache the default export\r\nexport default cache\r\n","// /**\r\n//  * Returns a function, that, as long as it continues to be invoked, will not\r\n//  * be triggered. The function will be called after it stops being called for\r\n//  * N milliseconds. If `immediate` is passed, trigger the function on the\r\n//  * leading edge, instead of the trailing. The function also has a property 'clear'\r\n//  * that is a function which will clear the timer to prevent previously scheduled executions.\r\n//  *\r\n//  * @source underscore.js\r\n//  * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\r\n//  * @param {Function} function to wrap\r\n//  * @param {Number} timeout in ms (`100`)\r\n//  * @param {Boolean} whether to execute at the beginning (`false`)\r\n//  * @api public\r\n//  */\r\n\r\n// function debounce(func: () => void, wait: number, immediate: boolean) {\r\n//   let timeout: NodeJS.Timeout | null\r\n//   let args: [] | null\r\n//   let context\r\n//   let timestamp\r\n//   let result\r\n//   if (null == wait) wait = 100\r\n\r\n//   function later() {\r\n//     let last = Date.now() - timestamp\r\n\r\n//     if (last < wait && last >= 0) {\r\n//       timeout = setTimeout(later, wait - last)\r\n//     } else {\r\n//       timeout = null\r\n//       if (!immediate) {\r\n//         result = func.apply(context, args)\r\n//         context = args = null\r\n//       }\r\n//     }\r\n//   }\r\n\r\n//   const debounced = (...args) => {\r\n//     context = this\r\n//     timestamp = Date.now()\r\n//     var callNow = immediate && !timeout\r\n//     if (!timeout) timeout = setTimeout(later, wait)\r\n//     if (callNow) {\r\n//       result = func.apply(context, args)\r\n//       context = args = null\r\n//     }\r\n\r\n//     return result\r\n//   }\r\n\r\n//   debounced.clear = function() {\r\n//     if (timeout) {\r\n//       clearTimeout(timeout)\r\n//       timeout = null\r\n//     }\r\n//   }\r\n\r\n//   debounced.flush = function() {\r\n//     if (timeout) {\r\n//       result = func.apply(context, args)\r\n//       context = args = null\r\n\r\n//       clearTimeout(timeout)\r\n//       timeout = null\r\n//     }\r\n//   }\r\n\r\n//   return debounced\r\n// }\r\n\r\n// export default debounce\r\n\r\nfunction debounce(\r\n  func: (...args: any[]) => void,\r\n  delay: number,\r\n  immediate?: boolean,\r\n) {\r\n  let timeout: NodeJS.Timeout | null\r\n\r\n  if (typeof func !== 'function') {\r\n    throw new TypeError('Expected a function')\r\n  }\r\n\r\n  return (...args: any[]) => {\r\n    const callNow = immediate && !timeout\r\n\r\n    if (!delay && delay !== 0) {\r\n      func(...args)\r\n    } else {\r\n      if (timeout) {\r\n        clearTimeout(timeout)\r\n      }\r\n\r\n      timeout = setTimeout(() => {\r\n        timeout = null\r\n\r\n        if (!immediate) {\r\n          func(...args)\r\n        }\r\n      }, delay)\r\n\r\n      if (callNow) {\r\n        func(...args)\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default debounce\r\n","// declare an interface for the object that is\r\n// used to describe each link and stored in the\r\n// map\r\nexport interface LinkState {\r\n  hasLoaded: boolean\r\n  wasRejected: boolean\r\n  error?: any\r\n  link: HTMLLinkElement\r\n}\r\n\r\n/**\r\n * map for link names against utility objects\r\n */\r\nconst loadedLinks: Map<string, LinkState> = new Map()\r\n\r\n/**\r\n * Get a style or other linked resource from a remote location.\r\n * @param url {string} - The URL/location of the resource to be retrieved.\r\n * @param name {string} - The name of the resource to be retrieved.\r\n */\r\nexport function getLink(url: string, name: string) {\r\n  if (\r\n    !loadedLinks.has(name) &&\r\n    !document.querySelector(`link[href=\"${url}\"]`)\r\n  ) {\r\n    const link: HTMLLinkElement = document.createElement('link')\r\n    const body = document.getElementsByTagName('body')[0]\r\n\r\n    link.href = url\r\n    link.rel = 'stylesheet'\r\n    link.type = 'text/css'\r\n\r\n    body.appendChild(link)\r\n\r\n    const linkObject: LinkState = {\r\n      hasLoaded: false,\r\n      link,\r\n      wasRejected: false,\r\n    }\r\n\r\n    loadedLinks.set(name, linkObject)\r\n  }\r\n\r\n  return loadedLinks.get(name)\r\n}\r\n\r\n// make the \"getLink\" method the default export\r\nexport default getLink\r\n","// declare an interface representing the URL map that\r\n// is returned from this method\r\nexport interface ScriptMap {\r\n  [key: string]: string\r\n}\r\n\r\nexport function getScriptMap(secure?: boolean): ScriptMap {\r\n  // store the versions of the HERE API\r\n  const apiVersion = 'v3'\r\n  const codeVersion = '3.0'\r\n\r\n  // get the relevant protocol for the HERE Maps API\r\n  let protocol = ''\r\n\r\n  if (secure === true) {\r\n    protocol = 'https:'\r\n  }\r\n\r\n  // the base url for all scripts from the API\r\n  const baseUrl: string =\r\n    `${protocol}//js.api.here.com/` + `${apiVersion}/${codeVersion}`\r\n\r\n  // core code\r\n  const coreScript: string = `${baseUrl}/mapsjs-core.js`\r\n\r\n  // service code\r\n  const serviceScript: string = `${baseUrl}/mapsjs-service.js`\r\n\r\n  // default ui code\r\n  const uiScript: string = `${baseUrl}/mapsjs-ui.js`\r\n\r\n  // map events (pan, scroll wheel zoom) code\r\n  const mapEventsScript: string = `${baseUrl}/mapsjs-mapevents.js`\r\n\r\n  // return an array with all script names within\r\n  return {\r\n    coreScript,\r\n    mapEventsScript,\r\n    serviceScript,\r\n    uiScript,\r\n  }\r\n}\r\n\r\n// make the getScriptMap method the default export\r\nexport default getScriptMap\r\n","import React from 'react'\r\n\r\nexport interface HEREMapContext {\r\n  map?: H.Map\r\n  behavior?: H.mapevents.Behavior\r\n  ui?: H.ui.UI\r\n}\r\n\r\nconst MapContext = React.createContext({} as HEREMapContext)\r\n\r\nexport default MapContext\r\n","let platform: any\r\n\r\n// return the current platform if there is one,\r\n// otherwise open up a new platform\r\nexport function getPlatform(platformOptions: H.service.Platform.Options) {\r\n  if (platform) {\r\n    return platform\r\n  }\r\n\r\n  platform = new H.service.Platform(platformOptions)\r\n\r\n  return platform\r\n}\r\n\r\n// make the getPlatform method the default export\r\nexport default getPlatform\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\n\r\nimport cache, { onAllLoad } from './utils/cache'\r\nimport debounce from './utils/debounce'\r\nimport getLink from './utils/get-link'\r\nimport getScriptMap from './utils/get-script-map'\r\nimport MapContext, { HEREMapContext } from './utils/map-context'\r\nimport getPlatform from './utils/get-platform'\r\n\r\nexport interface HEREMapProps extends H.Map.Options {\r\n  appId: string\r\n  appCode: string\r\n  animateCenter?: boolean\r\n  animateZoom?: boolean\r\n  hidpi?: boolean\r\n  interactive?: boolean\r\n  secure?: boolean\r\n  setLayer?: {\r\n    layer:\r\n      | 'map'\r\n      | 'traffic'\r\n      | 'panorama'\r\n      | 'transit'\r\n      | 'xbase'\r\n      | 'base'\r\n      | 'labels'\r\n    mapType: 'normal' | 'satelite' | 'terrain'\r\n  }\r\n}\r\n\r\nexport interface OwnState {}\r\n\r\nexport class HEREMap extends React.Component<HEREMapProps, HEREMapContext> {\r\n  private debouncedResizeMap: any\r\n  // public static contextType = MapContext\r\n\r\n  constructor(props: HEREMapProps) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      map: undefined,\r\n      behavior: undefined,\r\n      ui: undefined,\r\n    }\r\n\r\n    this.debouncedResizeMap = debounce(this.resizeMap, 200)\r\n  }\r\n\r\n  public componentDidMount() {\r\n    const { secure } = this.props\r\n\r\n    cache(getScriptMap(secure === true))\r\n    const stylesheetUrl = `${\r\n      secure === true ? 'https:' : ''\r\n    }//js.api.here.com/v3/3.0/mapsjs-ui.css`\r\n    getLink(stylesheetUrl, 'HERE Maps UI')\r\n\r\n    onAllLoad(() => {\r\n      const map = this.createMap()\r\n\r\n      window.addEventListener('resize', this.debouncedResizeMap)\r\n\r\n      this.setState({ ...map })\r\n    })\r\n  }\r\n\r\n  public componentDidUpdate(prevProps: HEREMapProps) {\r\n    if (\r\n      prevProps.center &&\r\n      this.props.center &&\r\n      (prevProps.center.lat !== this.props.center.lat ||\r\n        prevProps.center.lng !== this.props.center.lng)\r\n    ) {\r\n      this.setCenter(this.props.center)\r\n    }\r\n\r\n    if (\r\n      prevProps.zoom &&\r\n      this.props.zoom &&\r\n      prevProps.zoom !== this.props.zoom\r\n    ) {\r\n      this.setZoom(this.props.zoom)\r\n    }\r\n  }\r\n\r\n  public componentWillUnmount() {\r\n    window.removeEventListener('resize', this.debouncedResizeMap)\r\n  }\r\n\r\n  public createMap = (): HEREMapContext => {\r\n    const {\r\n      appId,\r\n      appCode,\r\n      center,\r\n      hidpi,\r\n      interactive,\r\n      zoom,\r\n      setLayer,\r\n    } = this.props\r\n\r\n    const platform = getPlatform({\r\n      app_code: appCode,\r\n      app_id: appId,\r\n      useHTTPS: true,\r\n    })\r\n\r\n    const defaultLayers = platform.createDefaultLayers({\r\n      ppi: hidpi ? 320 : 72,\r\n    })\r\n\r\n    const mapElement = document.querySelector('.map-container')\r\n\r\n    const HERE: HEREMapContext = {}\r\n\r\n    let layer = defaultLayers.normal.map\r\n    if (setLayer) {\r\n      layer = defaultLayers[setLayer.mapType][setLayer.layer]\r\n    }\r\n\r\n    if (mapElement) {\r\n      HERE.map = new H.Map(mapElement, layer, {\r\n        center: center,\r\n        pixelRatio: hidpi ? 2 : 1,\r\n        zoom: zoom,\r\n      })\r\n      if (interactive) {\r\n        HERE.behavior = new H.mapevents.Behavior(\r\n          new H.mapevents.MapEvents(HERE.map),\r\n        )\r\n\r\n        HERE.ui = H.ui.UI.createDefault(HERE.map, defaultLayers)\r\n      }\r\n    }\r\n\r\n    return HERE\r\n  }\r\n\r\n  public getElement(): Element | Text | null {\r\n    return ReactDOM.findDOMNode(this)\r\n  }\r\n\r\n  public setCenter(point: H.geo.IPoint): void {\r\n    const { animateCenter } = this.props\r\n    const { map } = this.state\r\n    if (map) {\r\n      map.setCenter(point, animateCenter === true)\r\n    }\r\n  }\r\n\r\n  public setZoom(zoom: number): void {\r\n    const { animateZoom } = this.props\r\n    const { map } = this.state\r\n    if (map) {\r\n      map.setZoom(zoom, animateZoom === true)\r\n    }\r\n  }\r\n\r\n  private resizeMap = () => {\r\n    const { map } = this.state\r\n    if (map) {\r\n      map.getViewPort().resize()\r\n    }\r\n  }\r\n\r\n  public render() {\r\n    const { map } = this.state\r\n    const { children } = this.props\r\n\r\n    return (\r\n      <MapContext.Provider value={this.state}>\r\n        <div\r\n          className=\"map-container\"\r\n          id={`map-container`}\r\n          style={{ height: '100%' }}\r\n        >\r\n          {map ? children : null}\r\n        </div>\r\n      </MapContext.Provider>\r\n    )\r\n  }\r\n}\r\n\r\nexport default HEREMap\r\n","import React from 'react'\r\n\r\nimport MapContext, { HEREMapContext } from './utils/map-context'\r\n\r\nexport interface CircleProps extends H.map.Circle.Options, H.geo.IPoint {\r\n  strokeColor?: string\r\n  lineWidth?: number\r\n  fillColor?: string\r\n  radius: number\r\n}\r\n\r\nexport class Circle extends React.Component<CircleProps> {\r\n  public static contextType = MapContext\r\n  public static defaultProps = {\r\n    fillColor: 'rgba(255, 255, 255, 0.5)',\r\n    lineWidth: 1,\r\n    radius: 1000,\r\n    strokeColor: 'black',\r\n  }\r\n  public context!: HEREMapContext\r\n\r\n  private circle?: H.map.Circle\r\n\r\n  public componentDidUpdate(prevProps: CircleProps) {\r\n    if (prevProps.lat !== this.props.lat || prevProps.lng !== this.props.lng) {\r\n      this.setCenter({\r\n        lat: prevProps.lat,\r\n        lng: prevProps.lng,\r\n      })\r\n    }\r\n\r\n    if (prevProps.radius && prevProps.radius !== this.props.radius) {\r\n      this.setRadius(prevProps.radius)\r\n    }\r\n  }\r\n\r\n  public componentWillUnmount() {\r\n    const { map } = this.context\r\n\r\n    if (map && this.circle) {\r\n      map.removeObject(this.circle)\r\n    }\r\n  }\r\n\r\n  private addCircleToMap() {\r\n    const { map } = this.context\r\n\r\n    const { lat, lng, strokeColor, lineWidth, fillColor, radius } = this.props\r\n\r\n    const circle = new H.map.Circle(\r\n      {\r\n        lat,\r\n        lng,\r\n      },\r\n      radius,\r\n      {\r\n        style: {\r\n          fillColor,\r\n          lineWidth,\r\n          strokeColor,\r\n        },\r\n      },\r\n    )\r\n    if (map) {\r\n      map.addObject(circle)\r\n\r\n      this.circle = circle\r\n    }\r\n  }\r\n\r\n  private setCenter(point: H.geo.IPoint) {\r\n    if (this.circle) {\r\n      this.circle.setCenter(point)\r\n    }\r\n  }\r\n\r\n  private setRadius(radius: number) {\r\n    if (this.circle) {\r\n      this.circle.setRadius(radius)\r\n    }\r\n  }\r\n\r\n  public render() {\r\n    const { map } = this.context\r\n\r\n    if (map && !this.circle) {\r\n      this.addCircleToMap()\r\n    }\r\n\r\n    return null\r\n  }\r\n}\r\n\r\nexport default Circle\r\n","/**\r\n * Map for HTML strings against H.map.DomIcon instances\r\n */\r\nexport const DomIcons: Map<string, H.map.DomIcon> = new Map()\r\n\r\n/**\r\n * Returns the DOM Icon for the input HTML string, ensuring that no more\r\n * than one DOM Icon is created for each HTML string\r\n * @param html {string} - A string containing the markup to be used as a Dom Icon.\r\n */\r\nexport default function getDomMarkerIcon(\r\n  html: string,\r\n): H.map.DomIcon | undefined {\r\n  if (!DomIcons.has(html)) {\r\n    const icon = new H.map.DomIcon(html)\r\n    DomIcons.set(html, icon)\r\n  }\r\n\r\n  return DomIcons.get(html)\r\n}\r\n","/**\r\n * Map for image URL strings against H.map.Icon instances\r\n */\r\nexport const Icons: Map<string, H.map.Icon> = new Map()\r\n\r\n/**\r\n * Returns the Icon for the input bitmap URL string, ensuring that no more\r\n * than one Icon is created for each bitmap\r\n * @param bitmap {string} - The location of the bitmap to be used as an icon\r\n */\r\nexport default function getMarkerIcon(bitmap: string): H.map.Icon | undefined {\r\n  if (!Icons.has(bitmap)) {\r\n    const icon = new H.map.Icon(bitmap)\r\n    Icons.set(bitmap, icon)\r\n  }\r\n\r\n  return Icons.get(bitmap)\r\n}\r\n","/**\r\n * A helper function that disables map behavior on drag event in order to allow\r\n * the marker to be moved.\r\n * @param map\r\n * @param behavior\r\n */\r\nexport function setMarkerDragEvent(\r\n  map: H.Map,\r\n  behavior: H.mapevents.Behavior,\r\n) {\r\n  map.addEventListener(\r\n    'dragstart',\r\n    (e: H.util.Event) => {\r\n      if (\r\n        e.target instanceof H.map.Marker ||\r\n        e.target instanceof H.map.DomMarker\r\n      ) {\r\n        behavior.disable()\r\n      }\r\n    },\r\n    false,\r\n  )\r\n\r\n  map.addEventListener(\r\n    'dragend',\r\n    (e: H.util.Event) => {\r\n      if (\r\n        e.target instanceof H.map.Marker ||\r\n        e.target instanceof H.map.DomMarker\r\n      ) {\r\n        behavior.enable()\r\n      }\r\n    },\r\n    false,\r\n  )\r\n\r\n  map.addEventListener(\r\n    'drag',\r\n    (e: any) => {\r\n      const target = e.target\r\n      const pointer = e.currentPointer\r\n      if (\r\n        target instanceof H.map.Marker ||\r\n        e.target instanceof H.map.DomMarker\r\n      ) {\r\n        target.setPosition(\r\n          map.screenToGeo(pointer.viewportX, pointer.viewportY),\r\n        )\r\n      }\r\n    },\r\n    false,\r\n  )\r\n}\r\n","import React from 'react'\r\nimport ReactDOMServer from 'react-dom/server'\r\n\r\nimport getDomMarkerIcon from './utils/get-dom-marker-icon'\r\nimport getMarkerIcon from './utils/get-marker-icon'\r\nimport MapContext, { HEREMapContext } from './utils/map-context'\r\nimport { setMarkerDragEvent } from './utils/set-drag-event'\r\n\r\nconst markerEvents = {\r\n  onDragStart: 'dragstart',\r\n  onDrag: 'drag',\r\n  onDragEnd: 'dragend',\r\n}\r\n\r\nexport interface MarkerProps extends H.map.Marker.Options, H.geo.IPoint {\r\n  bitmap?: string\r\n  draggable?: boolean\r\n  onDragStart?: (e: H.util.Event) => void\r\n  onDrag?: (e: H.util.Event) => void\r\n  onDragEnd?: (e: H.util.Event) => void\r\n}\r\n\r\nexport class Marker extends React.Component<MarkerProps> {\r\n  public static contextType = MapContext\r\n  public context!: HEREMapContext\r\n  private marker?: H.map.DomMarker | H.map.Marker\r\n\r\n  public componentDidMount() {\r\n    const { map } = this.context\r\n    if (map && !this.marker) {\r\n      this.addMarkerToMap()\r\n    }\r\n\r\n    if (this.marker) {\r\n      Object.entries(markerEvents).forEach(([event, hereEvent]) => {\r\n        if (typeof this.props[event] === 'function') {\r\n          this.marker!.addEventListener(hereEvent, this.props[event])\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  public componentDidUpdate(prevProps: MarkerProps) {\r\n    if (prevProps.lat !== this.props.lat || prevProps.lng !== this.props.lng) {\r\n      this.setPosition({\r\n        lat: this.props.lat,\r\n        lng: this.props.lng,\r\n      })\r\n    }\r\n  }\r\n\r\n  public componentWillUnmount() {\r\n    const { map } = this.context\r\n\r\n    if (this.marker) {\r\n      Object.entries(markerEvents).forEach(([event, hereEvent]) => {\r\n        if (typeof this.props[event] === 'function') {\r\n          this.marker!.removeEventListener(hereEvent, this.props[event])\r\n        }\r\n      })\r\n    }\r\n\r\n    if (map && this.marker) {\r\n      map.removeObject(this.marker)\r\n    }\r\n  }\r\n\r\n  private addMarkerToMap() {\r\n    const { map, behavior } = this.context\r\n    const { children, bitmap, lat, lng, draggable } = this.props\r\n\r\n    let marker: H.map.DomMarker | H.map.Marker\r\n    if (map) {\r\n      if (React.Children.count(children) > 0) {\r\n        const html = ReactDOMServer.renderToStaticMarkup(\r\n          <div className=\"dom-marker\">{children}</div>,\r\n        )\r\n        const icon = getDomMarkerIcon(html)\r\n        marker = new H.map.DomMarker({ lat, lng }, { icon })\r\n      } else if (bitmap) {\r\n        const icon = getMarkerIcon(bitmap)\r\n\r\n        marker = new H.map.Marker({ lat, lng }, { icon })\r\n      } else {\r\n        marker = new H.map.Marker({ lat, lng })\r\n      }\r\n\r\n      if (draggable && behavior) {\r\n        marker.draggable = draggable\r\n        setMarkerDragEvent(map, behavior)\r\n      }\r\n\r\n      map.addObject(marker)\r\n      this.marker = marker\r\n    }\r\n    return null\r\n  }\r\n\r\n  private setPosition(point: H.geo.IPoint): void {\r\n    if (this.marker) {\r\n      this.marker.setPosition(point)\r\n    }\r\n  }\r\n\r\n  public render() {\r\n    return null\r\n  }\r\n}\r\n\r\nexport default Marker\r\n","import React from 'react'\r\n\r\nimport MapContext, { HEREMapContext } from './utils/map-context'\r\n\r\ntype Shape = string[]\r\n\r\nexport interface RouteLineProps extends H.map.Polyline.Options, H.geo.IPoint {\r\n  strokeColor?: string\r\n  lineWidth?: number\r\n  shape: Shape\r\n}\r\n\r\nclass RouteLine extends React.Component<RouteLineProps> {\r\n  public static contextType = MapContext\r\n  public context!: HEREMapContext\r\n  private routeLine?: H.map.Polyline\r\n\r\n  public componentDidUpdate(prevProps: RouteLineProps) {\r\n    const { shape } = this.props\r\n    if (this.didShapeChange(prevProps.shape, shape)) {\r\n      this.addRouteLineToMap()\r\n    }\r\n  }\r\n\r\n  public componentWillUnmount() {\r\n    const { map } = this.context\r\n\r\n    if (map && this.routeLine) {\r\n      map.removeObject(this.routeLine)\r\n    }\r\n  }\r\n\r\n  private didShapeChange = (prevShape: Shape, nextShape: Shape) => {\r\n    const diff = nextShape.filter((coord, i) => {\r\n      if (coord && prevShape && prevShape[i]) {\r\n        return coord !== prevShape[i]\r\n      }\r\n      return true\r\n    })\r\n    return Boolean(diff.length)\r\n  }\r\n\r\n  private addRouteLineToMap() {\r\n    const { map } = this.context\r\n\r\n    const { shape, strokeColor, lineWidth } = this.props\r\n\r\n    const linestring = new H.geo.LineString()\r\n    shape.forEach(point => {\r\n      const [lat, lng] = point.split(',')\r\n      linestring.pushLatLngAlt(Number(lat), Number(lng), 1)\r\n    })\r\n\r\n    const routeLine = new H.map.Polyline(linestring, {\r\n      style: { strokeColor, lineWidth },\r\n    })\r\n\r\n    if (map) {\r\n      if (this.routeLine) {\r\n        map.removeObject(this.routeLine)\r\n      }\r\n      map.addObject(routeLine)\r\n\r\n      this.routeLine = routeLine\r\n    }\r\n  }\r\n\r\n  public render() {\r\n    const { map } = this.context\r\n\r\n    if (map && !this.routeLine) {\r\n      this.addRouteLineToMap()\r\n    }\r\n\r\n    return null\r\n  }\r\n}\r\n\r\nexport default RouteLine\r\n"],"names":["tslib_1.__extends"],"mappings":"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"}